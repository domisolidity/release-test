(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{84021:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return C}});var t=r(50029),s=r(87794),i=r.n(s),c=r(67294),o=r(25617),a=r(11163),l=r(27899),u=r(20949),d=r(68527),h=r(34651),x=r(26723),f=r(4612),p=r(41664),j=r(79042),m=r(59876),g=r(97936),b=r(85893);function v(e,n){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return k(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){o=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(o)throw i}}}}function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var y=function(e){var n=(0,o.v9)((function(e){return e.blockchain})),r=n.account,s=n.nftContract,a=(0,c.useState)(),l=a[0],u=a[1],h=e.tokenId,f=function(){var e=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getPastEvents("NftHistory",{filter:{tokenId:h},fromBlock:0,toBlock:"latest"}).then((function(e){console.log(e);var n,r=[],t=v(e);try{for(t.s();!(n=t.n()).done;){var s=n.value;r.push({value:s.returnValues,tx:s.transactionHash})}}catch(i){t.e(i)}finally{t.f()}u(r)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return console.log(l),e.next=5,f();case 5:case"end":return e.stop()}}),e)}))),[r]),(0,b.jsxs)(d.xu,{m:"0 auto",w:"80%",children:[(0,b.jsx)(d.xu,{p:"3",mb:"5",bg:"#182749",children:(0,b.jsxs)(d.xv,{fontSize:"20",children:["Nft History"," ",(0,b.jsx)("span",{style:{marginLeft:10},children:(0,b.jsx)(x.zx,{variant:"ghost",onClick:function(){f()},children:(0,b.jsx)(m.ny,{})})})]})}),(0,b.jsx)(j.xJ,{children:(0,b.jsxs)(j.iA,{children:[(0,b.jsx)(j.hr,{children:(0,b.jsxs)(j.Tr,{bg:"#1827493e",children:[(0,b.jsx)(j.Th,{children:"Type"}),(0,b.jsx)(j.Th,{children:"from"}),(0,b.jsx)(j.Th,{children:"to"}),(0,b.jsx)(j.Th,{children:"time"}),(0,b.jsx)(j.Th,{children:"detail"})]})}),l?l.map((function(e,n){return(0,b.jsx)(j.p3,{children:(0,b.jsxs)(j.Tr,{children:[(0,b.jsx)(j.Td,{children:e.value.historyType}),(0,b.jsx)(j.Td,{children:"".concat(e.value.from.substr(0,5)," ... ").concat(e.value.from.substr(38,41))}),(0,b.jsx)(j.Td,{children:"".concat(e.value.to.substr(0,5)," ... ").concat(e.value.to.substr(38,41))}),(0,b.jsx)(j.Td,{children:(0,g.f)(Number(e.value.time))}),(0,b.jsx)(j.Td,{children:(0,b.jsx)(p.default,{href:"https://rinkeby.etherscan.io/tx/".concat(e.tx),children:(0,b.jsx)("a",{style:{color:"#8eb8e0"},children:"view etherscan"})})})]})},n)})):null]})})]})},w=r(44418),S=function(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.blockchain})),r=n.web3,s=n.account,p=n.nftContract,j=n.nftDealContract,m=n.auctionCreatorContract,g=(0,a.useRouter)().query,v=g.id,k=g.grade,w=g.attributes,S=g.name,C=g.image,A=g.description,T=(0,c.useState)(!1),z=T[0],_=T[1],I=(0,c.useState)(),R=I[0],E=I[1],P=(0,c.useState)(!1),Z=P[0],N=P[1],F=(0,c.useState)(!1),X=F[0],H=F[1],L=(0,c.useState)(!1),D=L[0],O=L[1],B=(0,c.useState)(),M=B[0],W=B[1],J=(0,c.useState)(),q=J[0],U=J[1],V=(0,c.useState)(!1),$=V[0],G=V[1],K=(0,c.useState)(!1),Q=K[0],Y=K[1],ee=((0,u.ff)("gray.600","white"),function(){var n=(0,t.Z)(i().mark((function n(){var c,o,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!X){n.next=5;break}alert("\uc774\ubbf8 \uacbd\ub9e4 \ud310\ub9e4\uc911\uc785\ub2c8\ub2e4."),n.next=8;break;case 5:if(M&&q){n.next=8;break}return alert("\uac00\uaca9 \ub610\ub294 \uc885\ub8cc\uc77c\uc790\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"),n.abrupt("return",!1);case 8:return console.log("startingBid",M),console.log("expirationDate",q),c=r.utils.toWei(M,"ether"),o=Math.ceil(Date.now()/1e3),a=Math.ceil(new Date(q).getTime()/1e3),console.log(o),console.log(a),G(!0),n.next=18,m.methods.createAuction(v,p._address,c,o,a).send({from:s}).then((function(n){console.log("res",n),e((0,l.tA)(v,k,w,S,C,A))}));case 18:return alert("\uacbd\ub9e4 \uad8c\ud55c \uc2b9\uc778"),n.next=21,m.methods.getAuctionAddress(v).call({from:s}).then(function(){var e=(0,t.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.methods.setApprovalForAll(n,!0).send({from:s}).then((function(e){console.log(e),G(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 21:H(!0),n.next=28;break;case 24:n.prev=24,n.t0=n.catch(0),console.error(n.t0),G(!1);case 28:case"end":return n.stop()}}),n,null,[[0,24]])})));return function(){return n.apply(this,arguments)}}()),ne=function(){var e=(0,t.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(!0),console.log(!n),console.log(j._address),e.next=6,p.methods.setApprovalForAll(j._address,!n).send({from:s}).then((function(e){e&&(console.log(e),Y(!1),se())}));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),Y(!1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Z){e.next=4;break}return alert("\uc774\ubbf8 \ud310\ub9e4\uc911\uc785\ub2c8\ub2e4."),e.abrupt("return");case 4:if(z){e.next=9;break}return alert("\ud310\ub9e4 \uc2b9\uc778\uc744 \uba3c\uc800 \ubc1b\uc544\uc8fc\uc138\uc694"),e.abrupt("return",!1);case 9:if(R){e.next=12;break}return alert("\uac00\uaca9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"),e.abrupt("return",!1);case 12:return G(!0),e.next=15,j.methods.sellNft(v,r.utils.toWei(R,"ether")).send({from:s}).then((function(e){console.log(e),G(!1),ie()}));case 15:console.log(v),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),G(!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),e.next=4,j.methods.cancelSell(v).send({from:s}).then((function(e){G(!1),console.log(e),ie()}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),G(!1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.methods.isApprovedForAll(s,j._address).call().then((function(e){_(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.methods.onSale(v).call({from:s}).then((function(e){console.log(e),N(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,se();case 4:return e.next=6,ie();case 6:case"end":return e.stop()}}),e)}))),[s]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(d.rj,{w:"70vw",margin:"0 auto",templateColumns:"repeat(5,1fr)",templateRows:"repeat(1,1fr)",gap:2,pt:{base:"120px",md:"75px"},children:[(0,b.jsx)(d.P4,{colSpan:2,bg:"whiteAlpha.100",children:(0,b.jsxs)(d.kC,{direction:"column",children:[(0,b.jsx)(h.Ee,{src:C,borderRadius:10}),(0,b.jsxs)(d.xu,{borderRadius:10,border:"1px solid #302f2f",mt:"2",children:[(0,b.jsx)(d.X6,{size:"sm",bg:"#182749",padding:"3",children:"Description"}),(0,b.jsx)(d.xv,{fontSize:"15",padding:"3",children:A})]}),(0,b.jsxs)(d.xu,{borderRadius:10,bg:"##1E315F",border:"1px solid #302f2f",children:[(0,b.jsx)(d.X6,{size:"sm",bg:"#182749",padding:"3",children:"Properties"}),(0,b.jsx)(d.rj,{templateColumns:"repeat(3,1fr)",padding:"5",gap:1,children:w&&JSON.parse(w).map((function(e,n){return(0,b.jsxs)(d.P4,{align:"center",border:"2px solid #2b7997",borderRadius:15,children:[(0,b.jsx)(d.xv,{fontWeight:"bold",children:e.trait_type}),(0,b.jsx)(d.xv,{children:e.value})]},n)}))})]})]})}),(0,b.jsxs)(d.P4,{colSpan:3,bg:"whiteAlpha.100",padding:"5",children:[(0,b.jsx)(d.xv,{borderRadius:20,bg:"red"==k?"red.700":"green"==k?"green.700":"purple.700",w:"10%",padding:1,align:"center",children:k}),(0,b.jsx)(d.X6,{children:S}),(0,b.jsxs)(d.xv,{children:["owned by ",(0,b.jsx)("span",{style:{color:"skyblue"},children:"you"})]}),(0,b.jsxs)(d.xu,{mt:20,p:"20px 30px",bg:"whiteAlpha.100",border:"1px solid #6d6969bd",borderRadius:10,children:[(0,b.jsxs)(d.X6,{size:"lg",display:"inline",children:["Sell",Z?(0,b.jsx)(d.xv,{fontSize:"15",display:"inline-block",bg:"#e28a37",borderRadius:"20",ml:"2",p:"1",children:"\uc77c\ubc18 \ud310\ub9e4\uc911"}):z?(0,b.jsx)(d.xv,{fontSize:"15",display:"inline-block",bg:"#2d7a47",borderRadius:"20",ml:"2",p:"1",children:"\ud310\ub9e4 \uac00\ub2a5"}):X?(0,b.jsx)(d.xv,{fontSize:"15",display:"inline-block",bg:"#e28a37",borderRadius:"20",ml:"2",p:"1",children:"\uacbd\ub9e4 \uc9c4\ud589\uc911"}):(0,b.jsx)(d.xv,{fontSize:"15",display:"inline-block",bg:"#9e2d2d",borderRadius:"20",ml:"2",p:"1",children:"\ud310\ub9e4 \uc2b9\uc778 \ud544\uc694"})]}),(0,b.jsx)(d.xv,{mt:"5",children:"Type"}),(0,b.jsxs)(d.kC,{justify:"space-around",children:[(0,b.jsx)(x.zx,{onClick:function(){return O(!1)},p:"10",children:"Fixed Price"}),(0,b.jsx)(x.zx,{onClick:function(){return O(!0)},p:"10",children:"Timed Action"})]}),D?(0,b.jsx)(b.Fragment,{children:X?(0,b.jsx)(d.xv,{mt:"10",align:"center",children:"\uacbd\ub9e4\uac00 \uc9c4\ud589\uc911\uc785\ub2c8\ub2e4. \uacbd\ub9e4 \uad00\ub9ac\ub294 \ub9c8\ucf13\uc5d0 \ub4f1\ub85d\ub41c \uacbd\ub9e4\uac74\uc5d0\uc11c \uac00\ub2a5\ud569\ub2c8\ub2e4."}):(0,b.jsxs)(d.xu,{mt:"10",children:[(0,b.jsxs)(d.kC,{justify:"space-between",children:[(0,b.jsx)(d.xv,{children:"\uc785\ucc30 \uc2dc\uc791\uac00"}),(0,b.jsxs)(d.xu,{children:["Eth ",(0,b.jsx)(f.II,{w:"60",onChange:function(e){return W(e.target.value)}})]})]}),(0,b.jsxs)(d.kC,{justify:"space-between",children:[(0,b.jsx)(d.xv,{children:"\uacbd\ub9e4 \uc885\ub8cc\uc77c"}),(0,b.jsx)(f.II,{w:"60",type:"datetime-local",onChange:function(e){U(e.target.value)}})]}),(0,b.jsx)(d.kC,{justify:"center",mt:"10",children:(0,b.jsxs)(x.zx,{isLoading:$?1:null,loadingText:"adding..",ml:"5",onClick:ee,colorScheme:"linkedin",disabled:Z?1:0,children:[" ","\uacbd\ub9e4 \ub4f1\ub85d"]})})]})}):(0,b.jsx)(b.Fragment,{children:Z?(0,b.jsx)(d.kC,{justify:"center",mt:"10",children:(0,b.jsxs)(x.zx,{isLoading:$?1:null,loadingText:"Canceling..",onClick:te,children:[" ","\ud310\ub9e4 \ucde8\uc18c"," "]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.kC,{justify:"center",mt:"10",children:[(0,b.jsx)(d.xv,{lineHeight:10,mr:"5",children:"\ud310\ub9e4 \uac00\uaca9 \ub4f1\ub85d :"}),(0,b.jsx)(f.II,{w:"200",onChange:function(e){return E(e.target.value)}}),(0,b.jsx)(d.xv,{lineHeight:10,ml:"2",children:"eth"})]}),(0,b.jsxs)(d.kC,{justify:"center",mt:"10",children:[(0,b.jsx)(x.zx,{isLoading:Q?1:null,loadingText:"approving..",onClick:function(){return ne(z)},colorScheme:"linkedin",disabled:X||$?1:0,children:z?(0,b.jsx)("span",{children:"\ud310\ub9e4 \uad8c\ud55c \ucca0\ud68c"}):(0,b.jsx)("span",{children:"\ud310\ub9e4 \uad8c\ud55c \uc2b9\uc778"})}),(0,b.jsx)(x.zx,{isLoading:$?1:null,loadingText:"add marketPlace..",ml:"5",onClick:re,colorScheme:"linkedin",disabled:X||Q?1:0,children:"\ud310\ub9e4 \ub4f1\ub85d"})]})]})})]}),(0,b.jsx)(d.xu,{mt:"5"}),(0,b.jsxs)(d.xu,{mt:10,p:"20px 30px",bg:"whiteAlpha.100",border:"1px solid #6d6969bd",borderRadius:10,children:[(0,b.jsx)(d.X6,{size:"lg",children:"Present"}),(0,b.jsxs)(d.kC,{justify:"center",children:[(0,b.jsxs)(d.xv,{lineHeight:10,mr:"10",children:[" ","to Address"]})," ",(0,b.jsx)(f.II,{w:"200"}),(0,b.jsx)(x.zx,{ml:"2",colorScheme:"linkedin",disabled:X||Z||$||Q?1:0,children:"Present"})]})]})]}),(0,b.jsx)(d.P4,{colSpan:5,bg:"whiteAlpha.100",padding:5,children:(0,b.jsx)(y,{tokenId:v})})]})})},C=S;S.getLayout=function(e){return(0,b.jsx)(w.Z,{children:e})}},48203:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/[id]",function(){return r(84021)}])}},function(e){e.O(0,[482,714,354,173,874,597,379,774,888,179],(function(){return n=48203,e(e.s=n);var n}));var n=e.O();_N_E=n}]);