(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{75933:function(e,n,t){"use strict";var r=t(65988),i=t.n(r),a=t(67294),c=t(85893);n.Z=function(e){var n=e.remain-Date.now(),t=(0,a.useState)("00:00:00"),r=t[0],o=t[1];return(0,a.useEffect)((function(){if(!(n<=0)){var t=setInterval((function(){if(n<1e3)return console.log(n),void e.setEnd(!0);!function(){var e=new Date(n),t=("0"+e.getSeconds()).slice(-2),r=("0"+e.getMinutes()).slice(-2),i=Math.floor(n/1e3/60/60),a="".concat(i,":").concat(r,":").concat(t);o(a)}()}),1e3);return function(){return clearInterval(t)}}}),[r]),(0,c.jsxs)("div",{style:{marginTop:20},className:"jsx-2228034785",children:[n<1e3?(0,c.jsx)("div",{className:"jsx-2228034785 endAuction",children:"\uacbd\ub9e4 \uc885\ub8cc"}):(0,c.jsxs)("div",{className:"jsx-2228034785",children:["\ub0a8\uc740 \uc2dc\uac04 ",r]}),(0,c.jsx)(i(),{id:"2228034785",children:["div.jsx-2228034785{text-align:center;color:#df973a;font-weight:700;}",".endAuction.jsx-2228034785{font-size:20px;color:#999494;}"]})]})}},25498:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var r=t(67294),i=t(5993),a=t(15031),c=t(85393);a.jU?r.useLayoutEffect:r.useEffect;a.Ts;a.Ts;function o(e,n){var t,o=function(e){void 0===e&&(e="base");var n=(0,i.Fg)().__breakpoints,t=(0,c.O)(),a=r.useMemo((function(){var e;return null!=(e=null==n?void 0:n.details.map((function(e){var n=e.minMaxQuery;return{breakpoint:e.breakpoint,query:n.replace("@media screen and ","")}})))?e:[]}),[n]),o=r.useState((function(){if(e){var n=a.find((function(n){return n.breakpoint===e}));if(n)return n.breakpoint}if(t.window.matchMedia){var r=a.find((function(e){var n=e.query;return t.window.matchMedia(n).matches}));if(r)return r.breakpoint}})),s=o[0],u=o[1];return r.useEffect((function(){var e=a.map((function(e){var n=e.breakpoint,r=e.query,i=t.window.matchMedia(r);i.matches&&u(n);var a=function(e){e.matches&&u(n)};return"function"===typeof i.addEventListener?i.addEventListener("change",a):i.addListener(a),function(){"function"===typeof i.removeEventListener?i.removeEventListener("change",a):i.removeListener(a)}}));return function(){e.forEach((function(e){return e()}))}}),[a,n,t.window]),s}(n),s=(0,i.Fg)();if(o){var u=Array.from((null==(t=s.__breakpoints)?void 0:t.keys)||[]);return function(e,n,t){void 0===t&&(t=a.AV);var r=Object.keys(e).indexOf(n);if(-1!==r)return e[n];for(var i=t.indexOf(n);i>=0;){if(null!=e[t[i]]){r=i;break}i-=1}return-1!==r?e[t[r]]:void 0}((0,a.kJ)(e)?(0,a.sq)(Object.entries((0,a.Yq)(e,u)).map((function(e){return[e[0],e[1]]}))):e,o,u)}}var s=t(20949),u=t(68527),d=t(50029),l=t(87794),f=t.n(l),h=t(41664),p=t(68133),x=t(34651),m=t(26723),g=t(25617),v=t(9669),b=t.n(v),j=t(85893),w=function(){var e=(0,g.v9)((function(e){return e.blockchain})),n=e.web3,t=e.account,i=e.nftDealContract,a=(0,r.useState)(0),c=a[0],o=a[1],l=(0,r.useState)({data:null,tokenId:null}),v=l[0],w=l[1],k=(0,r.useState)(),y=k[0],C=(k[1],(0,r.useState)({red:!0,green:!0,purple:!0})),S=C[0],E=C[1],I=(0,r.useState)({one:!0,two:!0,three:!0,four:!0,five:!0}),N=I[0],T=I[1],Z="http://127.0.0.1:8080/ipfs/";(0,r.useEffect)((function(){console.log(y),console.log(S)}),[S]),(0,r.useEffect)((0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return console.log("\uc774\ubca4\ud2b8\ucd10\ub825\ud560\uacf3"),e.next=6,i.methods.getOnSaleNftArray().call({from:t}).then(function(){var e=(0,d.Z)(f().mark((function e(r){var a,c,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(r),o(r.length),a=[],c=f().mark((function e(c){var o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.methods.getNftTokenPrice(r[c]).call({from:t});case 2:return o=e.sent,console.log("\uac00\uaca9",n.utils.fromWei(o,"ether")),e.next=6,b().get("".concat(Z).concat("QmaGTbhBGBfdH6gXLoC4V5GScY1mtxac4Ye6ynA1Djw6mZ","/").concat(r[c],".json")).then((function(e){a.push({name:e.data.name,description:e.data.description,grade:e.data.grade,attributes:e.data.attributes,image:"".concat(Z).concat(e.data.image.slice(6)),tokenId:r[c],price:n.utils.fromWei(o,"ether")})}));case 6:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<r.length)){e.next=10;break}return e.delegateYield(c(s),"t0",7);case 7:s++,e.next=5;break;case 10:w(a);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]);var _=(0,s.ff)("gray.600","white"),M=(0,s.ff)("white","white"),A=(0,s.ff)("red.600","red.700"),X=(0,s.ff)("green.600","green.700"),z=(0,s.ff)("purple.600","purple.700");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.M5,{py:6,children:(0,j.jsx)(u.kC,{align:"center",children:(0,j.jsxs)(u.MI,{columns:{md:1,xl:2},children:[(0,j.jsxs)(u.kC,{ml:"1.5vw",direction:"row",children:[(0,j.jsx)(u.xv,{fontSize:"20",align:"left",p:"5",fontWeight:"extrabold",color:_,m:"0 20px",children:"grade"}),(0,j.jsx)(p.XZ,{colorScheme:"teal",defaultChecked:!0,value:"red",onChange:function(){E({red:!S.red,green:S.green,purple:S.purple})},children:(0,j.jsx)(u.xv,{p:"5px 15px",bg:A,borderRadius:"10",mr:6,color:M,children:"red"})}),(0,j.jsx)(p.XZ,{colorScheme:"teal",mt:"1",defaultChecked:!0,onChange:function(){E({red:S.red,green:!S.green,purple:S.purple})},children:(0,j.jsx)(u.xv,{p:"5px 15px",bg:X,borderRadius:"10",mr:6,color:M,children:"green"})}),(0,j.jsx)(p.XZ,{colorScheme:"teal",mt:"1",defaultChecked:!0,onChange:function(){E({red:S.red,green:S.green,purple:!S.purple})},children:(0,j.jsx)(u.xv,{p:"5px 15px",bg:z,borderRadius:"10",mr:6,color:M,children:"purple"})})]}),(0,j.jsxs)(u.kC,{ml:"1.5vw",direction:"row",w:"700px",children:[(0,j.jsx)(u.xv,{fontSize:"20",align:"left",p:"5",fontWeight:"extrabold",color:_,m:"0 20px",children:"price(eth)"}),(0,j.jsx)(p.XZ,{colorScheme:"teal",fontWeight:"bold",color:_,mr:5,defaultChecked:!0,onChange:function(){T({one:!N.one,two:N.two,three:N.three,four:N.four,five:N.five})},children:"~ 0.5"}),(0,j.jsx)(p.XZ,{colorScheme:"teal",fontWeight:"bold",color:_,mr:5,defaultChecked:!0,onChange:function(){T({one:N.one,two:!N.two,three:N.three,four:N.four,five:N.five})},children:"0.5 ~ 1.0"}),(0,j.jsx)(p.XZ,{colorScheme:"teal",fontWeight:"bold",color:_,mr:5,defaultChecked:!0,onChange:function(){T({one:N.one,two:N.two,three:!N.three,four:N.four,five:N.five})},children:"1.0 ~ 2.0"}),(0,j.jsx)(p.XZ,{colorScheme:"teal",fontWeight:"bold",color:_,mr:5,defaultChecked:!0,onChange:function(){T({one:N.one,two:N.two,three:N.three,four:!N.four,five:N.five})},children:"2.0 ~ 4.0"}),(0,j.jsx)(p.XZ,{colorScheme:"teal",fontWeight:"bold",color:_,mr:5,defaultChecked:!0,onChange:function(){T({one:N.one,two:N.two,three:N.three,four:N.four,five:!N.five})},children:"4.0 ~"})]})]})})}),(0,j.jsxs)(u.MI,{columns:{sm:1,md:4,xl:4},spacing:"24px",children:[(0,j.jsxs)(u.xv,{align:"left",children:[c," Nfts"]}),v[0]&&v.filter((function(e){if(!0===S.red&&"red"==e.grade||!0===S.green&&"green"==e.grade||!0===S.purple&&"purple"==e.grade)return!0})).filter((function(e){if(!0===N.one&&e.price<.5||!0===N.two&&(e.price>=.5&&e.price<1)||!0===N.three&&(e.price>=1&&e.price<2)||!0===N.four&&(e.price>=2&&e.price<4)||!0===N.five&&e.price>=4)return!0})).map((function(e,n){return(0,j.jsxs)(u.xu,{w:"300px",h:"460",bg:"blackAlpha.300",border:"2px solid #2E8F8B",_hover:{boxShadow:"dark-lg"},children:[(0,j.jsx)(x.Ee,{src:e.image,w:"320",h:"290",padding:"5"}),(0,j.jsxs)(u.kC,{p:"0px 20px 0px 20px",mb:"8%",justify:"space-between",children:[(0,j.jsx)(u.xu,{children:e.name}),(0,j.jsx)(u.xu,{w:"26%",borderRadius:20,bg:"red"==e.grade?"red.700":"green"==e.grade?"green.700":"purple.700",padding:1,align:"center",children:e.grade})]}),(0,j.jsxs)(u.xv,{fontSize:"20px",children:[e.price," ETH"]}),(0,j.jsx)(u.xu,{h:"10%",mt:"25",children:(0,j.jsx)(h.default,{href:{pathname:"market/".concat(e.tokenId),query:{id:e.tokenId,grade:e.grade,attr:JSON.stringify(e.attributes),name:e.name,image:e.image,description:e.description,price:e.price}},as:"market/".concat(e.tokenId),children:(0,j.jsx)("a",{children:(0,j.jsx)(m.zx,{bg:"#247471",children:"Buy now"})})})})]},n)}))]})]})},k=function(e){var n=(0,g.v9)((function(e){return e.blockchain})),t=n.account,i=n.auth,a=n.gameTokenContract,c=e.item,o=(0,r.useState)(0),l=o[0],h=o[1],p=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().post("/api/items/game-items/my-items-quantity",{account:t,itemName:c.itemName}).then((function(e){h(e.data.count)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,d.Z)(f().mark((function e(){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.methods.getOwner().call();case 2:return n=e.sent,e.next=5,a.methods.transfer(n,c.itemPrice).send({from:t});case 5:return r=e.sent,e.next=8,b().post("/api/items/game-items/buy-item",{account:r.from,itemName:c.itemName});case 8:i=e.sent,console.log(i.data.item_itemName,"\uad6c\ub9e4\ud588\uc5b4"),h(l+1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){p()}),[t,i]),(0,j.jsx)(u.M5,{py:6,children:(0,j.jsxs)(u.Kq,{borderWidth:"1px",borderRadius:"lg",w:{sm:"100%",md:"540px"},height:{sm:"476px",md:"20rem"},direction:{base:"column",md:"row"},bg:(0,s.ff)("white","gray.900"),boxShadow:"2xl",padding:4,children:[(0,j.jsx)(u.kC,{flex:1,bg:"whiteAlpha.200",children:(0,j.jsx)(x.Ee,{objectFit:"cover",boxSize:"100%",src:"/images/itemIcons/itemIcon".concat(c.itemId,".png")})}),(0,j.jsxs)(u.Kq,{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",p:1,pt:2,children:[(0,j.jsx)(u.X6,{fontSize:"2xl",fontFamily:"body",m:4,children:c.itemName}),(0,j.jsxs)(u.xv,{fontWeight:600,color:"gray.500",size:"sm",mb:4,children:[l,"\uac1c \ubcf4\uc720 \uc911"]}),(0,j.jsx)(u.xv,{textAlign:"center",color:(0,s.ff)("gray.700","gray.400"),px:3,children:c.itemDescription}),(0,j.jsx)(u.Kq,{width:"100%",mt:"2rem",direction:"row",padding:2,justifyContent:"space-between",alignItems:"center",children:(0,j.jsx)(m.zx,{flex:1,fontSize:"sm",rounded:"full",bg:"blue.400",color:"white",boxShadow:"0px 1px 25px -5px rgb(66 153 225 / 48%), 0 10px 10px -5px rgb(66 153 225 / 43%)",_hover:{bg:"blue.500"},_focus:{bg:"blue.500"},onClick:v,children:"\uad6c\ub9e4"})})]})]})})},y=function(){var e=(0,r.useState)([]),n=e[0],t=e[1],i=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("/api/items/game-items").then((function(e){return t(e.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){i()}),[]),(0,j.jsx)(u.MI,{columns:{sm:1,md:2,lg:3,xl:4},spacing:"24px",children:n&&n.map((function(e){return(0,j.jsx)(k,{item:e},e.itemId)}))})},C=t(96486),S=t.n(C),E=t(75933),I=function(e){var n=e.nft;return(0,j.jsxs)(u.xu,{w:"300px",h:"500",bg:"blackAlpha.300",border:"2px solid #287976b7",_hover:{boxShadow:"dark-lg"},children:[(0,j.jsx)(x.Ee,{src:n.image,w:"320",h:"290",padding:"5"}),(0,j.jsxs)(u.kC,{justify:"space-between",marginBottom:"5vh",p:"0px 25px",children:[(0,j.jsx)(u.xu,{children:n.name}),(0,j.jsx)(u.xu,{borderRadius:"10",p:"1",bg:"red"==n.grade?"red.700":"green"==n.grade?"green.700":"purple.700",children:n.grade})]}),(0,j.jsx)(u.xv,{align:"left",children:(0,j.jsx)(E.Z,{remain:n.remainTime,setEnd:function(e){}})}),(0,j.jsx)(u.xu,{h:"10%",mt:"30",children:(0,j.jsx)(h.default,{href:{pathname:"market/auction/".concat(n.tokenId),query:{id:n.tokenId,grade:n.grade,attributes:JSON.stringify(n.attributes),name:n.name,image:n.image,description:n.description,remainTime:n.remainTime}},as:"market/auction/".concat(n.tokenId),children:(0,j.jsx)("a",{children:(0,j.jsx)(m.zx,{bg:"#287976b7",children:"Place Bid"})})})})]})},N=function(){var e=(0,g.v9)((function(e){return e.blockchain})),n=(e.web3,e.account),t=e.auctionCreatorContract,i=(0,r.useState)(0),a=i[0],c=i[1],o=(0,r.useState)({data:null,tokenId:null}),s=o[0],l=o[1],h=(0,r.useState)({running:!0,ended:!0}),x=h[0],m=h[1],v=(0,r.useState)(!1),w=(v[0],v[1],"http://127.0.0.1:8080/ipfs/"),k=function(){var e=(0,d.Z)(f().mark((function e(){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.getCurrentBlock().call({from:n});case 2:return r=e.sent,console.log("currentBlockNum",r),console.log(t),e.next=7,t.methods.getAuctioningNft().call({from:n}).then(function(){var e=(0,d.Z)(f().mark((function e(n){var t,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),c(n.length),t=[],r=f().mark((function e(r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b().get("".concat(w).concat("QmaGTbhBGBfdH6gXLoC4V5GScY1mtxac4Ye6ynA1Djw6mZ","/").concat(n[r].tokenId,".json")).then(function(){var e=(0,d.Z)(f().mark((function e(i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n[r].endTime),t.push({name:i.data.name,description:i.data.description,grade:i.data.grade,attributes:S().cloneDeep(i.data.attributes),image:"".concat(w).concat(i.data.image.slice(6)),tokenId:n[r].tokenId,remainTime:1e3*n[r].endTime});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})),i=0;case 5:if(!(i<n.length)){e.next=10;break}return e.delegateYield(r(i),"t0",7);case 7:i++,e.next=5;break;case 10:l(t);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:k(),console.log("\uc774\ubca4\ud2b8\ucd10\ub825\ud560\uacf3");case 4:case"end":return e.stop()}}),e)}))),[n]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.P4,{children:(0,j.jsxs)(u.xu,{m:"0 auto",children:[(0,j.jsx)(u.xv,{align:"left",p:"5",children:"type"}),(0,j.jsxs)(u.kC,{ml:"2.5vw",direction:"column",children:[(0,j.jsx)(p.XZ,{defaultChecked:!0,onChange:function(){m({running:!x.running,ended:x.ended})},children:(0,j.jsx)(u.xv,{p:"1",bg:"whiteAlpha.100",borderRadius:"10",children:"\uacbd\ub9e4\uc911"})}),(0,j.jsx)(p.XZ,{mt:"1",defaultChecked:!0,onChange:function(){m({running:x.running,ended:!x.ended})},children:(0,j.jsx)(u.xv,{p:"1",bg:"whiteAlpha.100",borderRadius:"10",children:"\uacbd\ub9e4 \uc885\ub8cc"})})]})]})}),(0,j.jsxs)(u.P4,{bg:"whiteAlpha.100",colSpan:5,rowSpan:5,children:[(0,j.jsxs)(u.xv,{align:"left",children:[a," Nfts"]}),(0,j.jsx)(u.rj,{templateColumns:"repeat(4, 1fr)",ml:"5",gap:10,padding:"5",children:s[0]&&s.filter((function(e){if(1==x.running&&e.remainTime>Date.now()||1==x.ended&&e.remainTime<Date.now())return!0})).map((function(e,n){return(0,j.jsx)(I,{nft:e},n)}))})]})]})},T=t(44418),Z=t(62877),_=function(){var e=(0,r.useState)("ITEM"),n=e[0],t=e[1],i=(0,s.ff)("gray.600","white");(0,r.useEffect)((function(){a(n)}),[n]);var a=function(e){switch(e){case"ITEM":return(0,j.jsx)(y,{});case"NFT":return(0,j.jsx)(w,{});case"AUCTION":return(0,j.jsx)(N,{})}};return(0,j.jsxs)(u.kC,{flexDirection:"column",pt:{base:"120px",md:"75px"},align:"center",children:[(0,j.jsx)(u.xu,{children:(0,j.jsx)(u.xv,{fontSize:"5rem",as:"span",position:"relative",color:i,_after:{content:"''",width:"full",height:o({base:"20%",md:"30%"}),position:"absolute",bottom:1,left:0,bg:"teal.400",zIndex:-1},children:"Explore Market"})}),(0,j.jsx)(Z.Z,{subMenu:["ITEM","NFT","AUCTION"],getSelectedSubMenu:function(e){t(e.target.value)}}),a(n)]})},M=_;_.getLayout=function(e){return(0,j.jsx)(T.Z,{children:e})}},42002:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/market",function(){return t(25498)}])}},function(e){e.O(0,[482,714,662,354,173,874,597,988,379,774,888,179],(function(){return n=42002,e(e.s=n);var n}));var n=e.O();_N_E=n}]);