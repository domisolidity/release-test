(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{23515:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r,s=n(50029),a=n(65988),i=n.n(a),c=n(87794),o=n.n(c),u=n(67294),x=n(85893),l=(0,u.createContext)(),p=function(e){var t=e.state,n=e.dispatch,r=e.children;return(0,x.jsx)(l.Provider,{value:[t,n],children:r})},d=n(96486),f=function(e){var t=(0,d.random)(0,e-1);return(0,d.range)(e).map((function(e){return g(e===t)}))},h=function(e){return e.filter((function(e){return e.isOpen&&!e.hasRing})).length},g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{hasRing:e,isOpen:!1}},m=n(59499),j="IN_PROGRESS",b="DEFEAT",w="VICTORY",_=(r={},(0,m.Z)(r,b,"\ub9c1\uc744 \ucc3e\uc9c0 \ubabb\ud588\uc5b4\uc694!"),(0,m.Z)(r,w,"\ub9c1\uc744 \ubc1c\uacac\ud588\uc5b4\uc694!"),r),v="OPEN_CHEST",k="GIVE_UP",y="RESTART_GAME";function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e,t){var n,r=t.type,s=t.payload;switch(r){case v:if(e.gameStatus===j){var a=S({},e),i=a.chests[s];return i.isOpen=!0,i.hasRing?a.gameStatus=w:80===h(a.chests)&&(a.gameStatus=b,(n=a.chests,n.find((function(e){return e.hasRing}))).isOpen=!0),a}return e;case k:var c=S({},e);return c.gameStatus=b,c;case y:return S(S({},e),{},{chests:f(100),gameStatus:j});default:return e}},Z=function(e){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{disabled:e.disabled,onClick:e.onClick,className:"jsx-3529951214 Button",children:e.children}),(0,x.jsx)(i(),{id:"3529951214",children:[".Button.jsx-3529951214{width:100%;padding:5px;display:block;text-align:center;border:4px solid black;cursor:pointer;-webkit-text-decoration:none;text-decoration:none;margin-bottom:10px;background:linear-gradient(to bottom,#f2ea11 49%,#f7b503 50%);box-shadow:0 5px 5px 0 rgba(0,0,0,0.4);font-size:25px;font-weight:bold;-webkit-transition:0.3s;transition:0.3s;color:#333344;}",".Button.jsx-3529951214:focus{outline:none;}",".Button.jsx-3529951214:disabled{color:initial;-webkit-filter:grayscale(1);filter:grayscale(1);}"]})]})},O=function(e){var t=e.gameStart;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"jsx-249365198 Menu__ring"}),(0,x.jsx)(Z,{onClick:t,children:"\uc2dc\uc791"}),(0,x.jsx)(i(),{id:"249365198",children:['.Menu__ring.jsx-249365198{height:100px;width:100px;margin:0 auto 20px;background:url("../../images/ring.gif") no-repeat center / cover;}']})]})},E=n(25617),P=n(76988),M=n(82531),T=function(e){var t=e.chest,n=e.openChest,r=["Chest"];return t.isOpen&&(r.push("Chest--open"),t.hasRing&&r.push("Chest--has-ring")),(0,x.jsxs)("div",{className:"jsx-3989034178",children:[(0,x.jsx)("div",{onClick:n,className:"jsx-3989034178 "+(r.join(" ")||"")}),(0,x.jsx)(i(),{id:"3989034178",children:['.Chest.jsx-3989034178{width:calc(300px / 6 - 10px);height:calc(300px / 6 - 10px);margin:5px;cursor:pointer;background:url("/images/chest.png") no-repeat -3px 50% / cover;}',".Chest--open.jsx-3989034178{cursor:default;background-position:-56px 50%;-webkit-filter:grayscale(1);filter:grayscale(1);}",".Chest--has-ring.jsx-3989034178{position:relative;background-color:#f2ea11;-webkit-filter:grayscale(0);filter:grayscale(0);}",'.Chest--has-ring.jsx-3989034178::after{content:"";width:14px;height:14px;position:absolute;top:4px;left:50%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);background:url("../../../images/ring.gif") no-repeat center / cover;}']})]})},A=function(){var e=(0,u.useContext)(l)[0].gameStatus;return(0,x.jsxs)("div",{className:"jsx-1991605834 GameStatusCaption",children:[(0,x.jsx)("p",{className:"jsx-1991605834 GameStatusCaption__text",children:_[e]}),(0,x.jsx)(i(),{id:"1991605834",children:[".GameStatusCaption.jsx-1991605834{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);margin:0 auto;background:linear-gradient(to bottom,rgba(222,222,222,0.8) 49%,rgba(184,184,184,0.8) 50%);border:4px solid rgba(0,0,0,0.8);padding:10px;}",".GameStatusCaption__text.jsx-1991605834{margin:0;font-size:12px;white-space:nowrap;}"]})]})},B=function(){var e=(0,u.useContext)(l),t=e[0],n=e[1],r=t.gameStatus,s=t.chests;return(0,x.jsxs)("div",{className:"jsx-3490222694 ChestContainer",children:[s.map((function(e,t){return(0,x.jsx)(T,{chest:e,index:t,openChest:function(){return n({type:v,payload:t})}},t)})),r!==j&&(0,x.jsx)(A,{}),(0,x.jsx)(i(),{id:"3490222694",children:[".ChestContainer.jsx-3490222694{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 20px;position:relative;}"]})]})},R=function(e){var t=(0,u.useContext)(l),n=t[0],r=t[1],a=n.gameStatus,c=n.chests,p=80-h(c),d=e.account,f=e.gameTitle,g=e.score,m=e.resultBonus,_=e.getAttemptsMade,v=e.gameStart,C=(e.hasMission,function(){r({type:y}),v()}),S=function(){var e=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("\ud604\uc7ac \uc810\uc218\uc758 \uc808\ubc18\ub9cc \uc5bb\uace0 \uac8c\uc784\uc744 \ud3ec\uae30\ud569\ub2c8\ub2e4.")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.Z.sendScore(d,f,g/2,m);case 4:r({type:k});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){a==j?_(p):a==b?_(0):a==w&&_(p+1)}),[p]),(0,x.jsxs)("div",{className:"jsx-2170630722 ControlPanel",children:[(0,x.jsxs)("p",{className:"jsx-2170630722 ControlPanel__text",children:["\ub0a8\uc740 \uc5f4\uc1e0: ",p,"/",80]}),(0,x.jsxs)("div",{className:"jsx-2170630722",children:[(0,x.jsx)(Z,{disabled:a==j,onClick:function(){return C()},children:"\uc7ac\uc2dc\uc791"}),(0,x.jsx)(Z,{disabled:p>80-80/3||a!=j,onClick:function(){return S()},children:"\ud3ec\uae30\ud558\uae30"})]}),(0,x.jsx)(i(),{id:"2170630722",children:[".ControlPanel__text.jsx-2170630722{text-align:center;margin:0 0 25px;font-size:14px;}",".ControlPanel__text--danger.jsx-2170630722{color:#ea2027;}"]})]})},G=n(58006),F=n(453),D=n(68527),I=n(53238),z=n(20076),V=function(){var e=(0,E.v9)((function(e){return e.blockchain})),t=e.account,n=e.auth,r=P.Z.gameList[2].gameTitle,a=(0,u.useReducer)(N,{gameStatus:j,chests:f(100)}),c=a[0],l=a[1],d=(0,u.useState)(0),h=d[0],g=d[1],m=(0,u.useState)(""),b=m[0],_=m[1],v=(0,u.useState)(""),k=v[0],y=v[1],C=(0,u.useState)(!1),S=C[0],Z=C[1],T=(0,u.useState)(0),A=T[0],z=T[1],V=(0,u.useState)(0),L=V[0],X=V[1],H=(0,u.useState)(""),U=H[0],Y=H[1],q=(0,u.useState)(""),J=q[0],K=q[1],Q=function(e){g(e)},W=function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.resultBonus&&y(t.resultBonus);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,s.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(h<=0)){e.next=3;break}return alert("\uc794\uc5ec \uac8c\uc784 \uae30\ud68c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc544\uc774\ud15c\uc744 \uad6c\uc785\ud558\uc154\uc11c \ucda9\uc804\ud558\uc138\uc694 ^\u3148^"),e.abrupt("return");case 3:if(window.confirm("\uac8c\uc784\uae30\ud68c\uac00 \ucc28\uac10\ub429\ub2c8\ub2e4. \uac8c\uc784\uc744 \uc2dc\uc791\ud558\uc2dc\uaca0\ub098\uc774\uae4c?")){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,P.Z.minusGameCount(t,r);case 7:if(e.sent.data){e.next=11;break}return alert("\uac8c\uc784 \ud69f\uc218\uc5d0 \ubb38\uc81c \uc788\uc74c"),e.abrupt("return");case 11:return Z(!0),y(""),e.next=15,P.Z.getMyChance(t,r);case 15:n=e.sent,g(n);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((0,s.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.gameStatus!=w){e.next=19;break}return e.next=3,P.Z.sendScore(t,r,A,k).then((function(e){return console.log(e)}));case 3:return e.t0=X,e.next=6,P.Z.getMyBestScore(t,r);case 6:if(e.t1=e.sent,(0,e.t0)(e.t1),!U){e.next=19;break}if(console.log("\ubbf8\uc158\uc788\uc74c"),!U.attainment){e.next=12;break}return e.abrupt("return");case 12:if(!(A>=U.DailyMission.targetValue)){e.next=19;break}return e.next=15,P.Z.updateMission(t,U.mission_id);case 15:return e.next=17,P.Z.getMission(t,r);case 17:n=e.sent,Y(n);case 19:case"end":return e.stop()}}),e)}))),[c.gameStatus]),(0,u.useEffect)((0,s.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.Z.getMyNFT(t);case 4:r=e.sent,K(r);case 6:case"end":return e.stop()}}),e)}))),[t,n]),(0,u.useEffect)((0,s.Z)(o().mark((function e(){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&r&&J){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.Z.setParticipant(t,r);case 4:return e.next=6,P.Z.initChance(t,r,J);case 6:return e.t0=g,e.next=9,P.Z.getMyChance(t,r);case 9:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=_,e.next=14,P.Z.getGameItems();case 14:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=X,e.next=19,P.Z.getMyBestScore(t,r);case 19:return e.t5=e.sent,(0,e.t4)(e.t5),e.next=23,P.Z.getMission(t,r);case 23:(s=e.sent)&&Y(s);case 25:case"end":return e.stop()}}),e)}))),[J]),(0,x.jsxs)(D.kC,{mt:"120px",children:[(0,x.jsx)(I.Z,{filledValue:A,hasMission:U}),t&&n&&J?(0,x.jsxs)(D.xu,{w:"100%",children:[(0,x.jsx)(G.Z,{}),(0,x.jsx)(p,{state:c,dispatch:l,children:(0,x.jsxs)("div",{className:"jsx-681216109 App",children:[(0,x.jsx)("div",{className:"jsx-681216109 App__container",children:S?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h1",{className:"jsx-681216109 App__heading",children:"\uc0c1\uc790\ub97c \uc5f4\uc5b4\uc694!"}),(0,x.jsx)(B,{}),(0,x.jsx)(R,{gameStart:$,getAttemptsMade:function(e){z(e)},account:t,gameTitle:r,score:A,resultBonus:k,hasMission:U})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h1",{className:"jsx-681216109 App__heading",children:"\ucd5c\uc18c\ud55c\uc758 \ud69f\uc218\ub85c \ub9c1\uc744 \ucc3e\uc73c\uc138\uc694"}),(0,x.jsx)(O,{gameStart:$})]})}),(0,x.jsx)("div",{className:"jsx-681216109",children:b&&b.map((function(e){return(0,x.jsx)(M.Z,{item:e,gameTitle:r,getItemEffect:W,resultBonus:k,isPlaying:S,updateChance:Q},e.itemId)}))}),(0,x.jsxs)("div",{className:"jsx-681216109 score__box",children:["\uc810\uc218",(0,x.jsx)("br",{className:"jsx-681216109"}),k?Math.ceil(A*k):A]}),k?(0,x.jsxs)("div",{className:"jsx-681216109 item_effect__box",children:["\uc774\ubc88 \ud310 \uc810\uc218",(0,x.jsx)("br",{className:"jsx-681216109"}),Math.round(100*(k-1))," % \uc99d\uac00!"]}):null,(0,x.jsxs)("div",{className:"jsx-681216109 best_score__box",children:["\ucd5c\uace0\uae30\ub85d",(0,x.jsx)("br",{className:"jsx-681216109"}),L]}),(0,x.jsxs)("div",{className:"jsx-681216109 chance__box",children:["\ub0a8\uc740 \uae30\ud68c",(0,x.jsx)("br",{className:"jsx-681216109"}),h]})]})})]}):(0,x.jsx)(F.Z,{receivedText:"\ub85c\uadf8\uc778 \ubc0f \ub300\ud45c NFT\ub97c \uc124\uc815\ud558\uc154\uc57c \uac8c\uc784\uc5d0 \ucc38\uc5ec\ud558\uc2e4 \uc218 \uc788\uc74d\ub2c8\ub2e4"}),(0,x.jsx)(i(),{id:"681216109",children:[".App.jsx-681216109{min-height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;border:solid 3px yellow;}",".App__container.jsx-681216109{margin:0 auto;padding:0 10px;min-width:525px;max-width:1020px;}",".App__heading.jsx-681216109{text-align:center;font-size:18px;margin:20px 0;}",".chance__box.jsx-681216109{width:80px;position:absolute;top:10px;right:90px;text-align:center;}",".score__box.jsx-681216109{width:70px;position:absolute;top:10px;left:120px;text-align:center;}",".best_score__box.jsx-681216109{width:70px;position:absolute;top:10px;left:20px;text-align:center;}",".item_effect__box.jsx-681216109{width:100px;position:absolute;top:10px;left:220px;text-align:center;}"]})]})},L=V;V.getLayout=function(e){return(0,x.jsx)(z.Z,{children:e})}},83614:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/treasure",function(){return n(23515)}])}},function(e){e.O(0,[482,714,662,354,173,874,597,988,379,698,774,888,179],(function(){return t=83614,e(e.s=t);var t}));var t=e.O();_N_E=t}]);