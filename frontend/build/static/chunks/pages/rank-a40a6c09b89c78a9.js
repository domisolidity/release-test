(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{47389:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return R},default:function(){return A}});var r=t(50029),c=t(87794),a=t.n(c),i=t(67294),o=t(68527),s=t(9669),u=t.n(s),l=t(26723),f=t(85893),d=function(e){var n=e.gameList,t=e.getSelectedGameTitle;(0,i.useEffect)((function(){var e=document.querySelectorAll(".rank-menu-button");e.forEach((function(n){n.addEventListener("click",(function(){e.forEach((function(e){e.classList.remove("active")})),n.classList.add("active")}))}))}),[]);var r=function(e){t(e.target.name)};return(0,f.jsx)(o.kC,{m:"0 10px",flexDirection:"row",children:n.map((function(e){return(0,f.jsx)(l.zx,{w:"100px",h:"100px",name:e.gameTitle,onClick:r,m:"0 10px",children:e.gameTitle},e.gameId)}))})},p=t(20949),x=t(79042),h=t(81401),g=t(33447),j=t(59499),m=t(4730),v=t(5993),k=["variant","children"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,j.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=function(e){var n=e.variant,t=e.children,r=(0,m.Z)(e,k),c=(0,v.mq)("CardHeader",{variant:n});return(0,f.jsx)(o.xu,y(y({__css:c},r),{},{children:t}))},O=t(7657);t(41664);var S=function(e){var n=e.logo,t=e.player,r=e.score,c=e.date,a=e.ranking;console.log(a);var i=(0,p.ff)("gray.700","white");return(0,p.ff)("gray.400","#1a202c"),(0,p.ff)("white","gray.400"),(0,f.jsxs)(x.Tr,{children:[(0,f.jsx)(x.Td,{pl:"0px",children:(0,f.jsx)(o.xv,{fontSize:"md",color:i,fontWeight:"bold",children:a})}),(0,f.jsx)(x.Td,{pl:"0px",children:(0,f.jsx)(O.qE,{src:n,w:"50px",borderRadius:"12px",me:"18px"})}),(0,f.jsx)(x.Td,{children:(0,f.jsx)(o.kC,{direction:"column",children:(0,f.jsx)(o.xv,{fontSize:"md",color:i,fontWeight:"bold",children:t})})}),(0,f.jsx)(x.Td,{children:(0,f.jsx)(o.Ct,{fontSize:"16px",p:"3px 10px",borderRadius:"8px",children:r})}),(0,f.jsx)(x.Td,{children:(0,f.jsx)(o.xv,{fontSize:"md",color:i,fontWeight:"bold",pb:".5rem",children:c})}),(0,f.jsx)(x.Td,{})]})},_=t(25617),T=function(e){var n=e.currentRankData,t=e.captions,r=e.title,c=(0,p.ff)("gray.700","white");return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(h.Z,{overflowX:{sm:"scroll",xl:"hidden"},mt:10,children:[(0,f.jsx)(b,{p:"6px 0px 22px 0px",children:(0,f.jsx)(o.xv,{fontSize:"xl",color:c,fontWeight:"bold",children:r})}),(0,f.jsx)(g.Z,{children:(0,f.jsxs)(x.iA,{variant:"simple",color:c,children:[(0,f.jsx)(x.hr,{children:(0,f.jsx)(x.Tr,{my:".9rem",pl:"0px",color:"gray.400",children:t.map((function(e,n){return(0,f.jsx)(x.Th,{color:"gray.400",ps:0===n?"0px":null,children:e},n)}))})}),(0,f.jsx)(x.p3,{children:n.map((function(e,n){var t=new Date(e.updatedAt),r=t.getMonth()+1,c=t.getDate(),a=t.getHours(),i=t.getMinutes(),o=t.getSeconds(),s="".concat(r,"/").concat(c," ").concat(a,":").concat(i,":").concat(o),u=n+1;return(0,f.jsx)(S,{ranking:u,logo:e.logo,domain:e.domain,player:e.user_address,score:e.gameScore,date:e.updatedAt?s:null},n)}))})]})})]})})},E=t(94090),D=function(e){var n=e.pastRankData;console.log(n);var t=(0,i.useRef)(),r=(0,_.v9)((function(e){return e.blockchain})),c=(r.account,r.auth,(0,i.useState)([])),a=c[0],s=c[1],u=(0,i.useState)([]),l=u[0];u[1];(0,i.useEffect)((function(){if(0!=n.length){for(var e=[],t=1,r=n[n.length-1].weeks,c=function(r){var c=[];n.forEach((function(e){e.weeks==t&&c.push(e)})),c.sort((function(e,n){return e.ranking-n.ranking})),e.push(c),t++},a=0;a<r;a++)c();e.reverse(),s(e)}}),[n]);var d=function(e){var n=e.weeks;return console.log(n),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(E.UQ,{allowMultiple:!0,ref:t,children:l.map((function(e,n){return(0,f.jsx)(E.Qd,{ref:t,children:function(r){var c=r.isExpanded;return(0,f.jsxs)(f.Fragment,{children:[console.log(t),console.log("".concat(n,"\ubc88"),c),(0,f.jsx)("h2",{children:(0,f.jsxs)(E.KF,{children:[(0,f.jsxs)(o.xu,{flex:"1",textAlign:"left",children:[e[n].weeks," \uc8fc\ucc28"]}),(0,f.jsx)(AccordionIcon,{})]})}),(0,f.jsx)(AccordionPanel,{pb:4,children:(0,f.jsx)(CurrentRanking,{title:"".concat(e[n].game_title," ").concat(e[n].weeks," \uc8fc"),currentRankData:e,captions:["Rnaking","profile","player","score","".concat(e[n].updatedAt?"updated at":""),""]})})]})}},n)}))})})};return(0,f.jsx)(o.kC,{flexDirection:"column",children:(0,f.jsx)(E.UQ,{allowMultiple:!0,ref:t,children:a.length>0&&a.map((function(e,n){return(0,f.jsx)(d,{weeks:e},n)}))})})},C=t(44418),P=function(e){var n=e.gameList,t=(0,i.useState)("\ube14\ub85d\uc313\uae30"),c=t[0],s=t[1],l=(0,i.useState)([]),p=l[0],x=l[1],h=(0,i.useState)([]),g=h[0],j=h[1],m=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("/api/ranks/current-ranking",{gameTitle:c}).then((function(e){x(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("/api/ranks/past-ranking",{gameTitle:c}).then((function(e){j(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){c&&(v(),k())}),[c]),(0,f.jsxs)(o.kC,{flexDirection:"column",maxWidth:"1000px",margin:"0 auto",alignItems:"center",justifyContent:"center",pt:{base:"120px",md:"75px"},children:[(0,f.jsx)(d,{gameList:n,getSelectedGameTitle:m}),(0,f.jsx)(T,{title:c,currentRankData:p,captions:["Rnaking","profile","player","score","updated at",""]}),(0,f.jsx)(D,{pastRankData:g})]})},R=!0,A=P;P.getLayout=function(e){return(0,f.jsx)(C.Z,{children:e})}},8177:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rank",function(){return t(47389)}])}},function(e){e.O(0,[482,714,354,173,874,597,546,379,774,888,179],(function(){return n=8177,e(e.s=n);var n}));var n=e.O();_N_E=n}]);